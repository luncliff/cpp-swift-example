name: "Swift: Mac"

on:
  push:
    branches: ["**"]
  pull_request:
    branches: ["**"]

jobs:
  swift_test:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v2
      # - run: brew install swiftlint
      - name: "Setup Metal-cpp"
        run: |
          pwsh setup-metal-cpp.ps1
      - name: "Swift Build(Debug)"
        run: swift build --verbose --configuration debug # --target ...
      - name: "Swift Build(Release)"
        run: swift build --configuration release
      - name: "Swift Test"
        run: swift test --verbose --enable-code-coverage
      - name: "Swift Lint"
        run: swiftlint lint --output docs/lint.md --reporter markdown # --autocorrect
